"use strict";define(function(t,e){function o(){this.defaultDelay=500,document.documentElement&&document.documentElement.scrollTop?this.bodyEle=document.documentElement:document.body&&(this.bodyEle=document.body),this.init()}function n(){var t=$(".comment-area")[0],e=$(".ds-thread")[0];DUOSHUO.EmbedThread(e),t&&t.appendChild(e)}function i(){var t=$(".story-cover-arrow")[0];t&&(t.onclick=function(){scroller.goToEle($(".story-cover-arrow")[0],400)},t.onmouseover=function(){$(".post-header-mask")[0].style.opacity=.3,t.className+=" hoverLight",$(".post-cover-info").className+=" animated fadeOutUp";var e=$("#continue-reading");e.style.display="block"},t.onmouseout=function(){var t=$("#continue-reading");t.style.display="none"})}function r(t){t=t||window.event,("38"==t.keyCode||"40"==t.keyCode)&&t.preventDefault(),"38"==t.keyCode?scroller.goUp(400,400):"40"==t.keyCode&&scroller.goDown(400,400)}function s(t,e){var o=new l,r=function(e){var o=document.createElement("html");o.innerHTML=e;var n={title:document.title,url:t},r=o.querySelector("title").innerHTML;window.history.pushState(n,r,t);var s=o.querySelector("#container");$("#container").innerHTML=s.innerHTML,document.title=r,setTimeout(function(){$("#container").style.opacity=1},200),scroller.goTo(0,400),i(),document.getElementsByTagName("code").length>0&&seajs.use("hljs",function(t){t.initHighLight()})};o.get(t,function(t){switch(e){case"about":r(t),seajs.use(["page"],function(t){t.initSearch(),n(),a()});break;default:if(r(t),!e||"page"==e){seajs.use("index",function(t){t.init(),a()});break}seajs.use(["post"],function(t){t.init(),n(),a()})}$(".bar")[0].style.width="100%",setTimeout(function(){$("#nprogress").style.opacity=0},200),setTimeout(function(){$(".bar")[0].style.width="0%"},450),$("#to-top").onclick=function(){scroller.goTo(0,500)}})}function c(t){var e=t.split("/");if(e[2]==_siteDomain){if("rss"==e[3])return location.href=t;s(t,e[3])}else location.href=t}function a(){Array.prototype.slice.call(document.getElementsByTagName("a")).forEach(function(t){t.onclick=function(e){e.preventDefault(),$("#nprogress").style.opacity=1,$(".bar")[0].style.width="20%",$("#container").style.opacity=0,c(t.href)}})}window._siteDomain=window.location.host,window._defaultImageSource="https://dn-redrock.qbox.me/42794949.png-cover";var l=t("ajax").Ajax;window.$=function(t){return t?"#"==t[0]?document.getElementById(t.split("#")[1]):"."==t[0]?document.getElementsByClassName(t.split(".")[1]):document.getElementsByTagName(t):"false"},window.$.extend=function(){for(var t=Array.prototype.slice.call(arguments),e=0,o=t.length;o-1>e;e++){var n=t[e],i=t[e+1];for(j in i)n[j]=i[j]}return t[0]},o.prototype.init=function(t){this.lock="ready",clearTimeout(this.timer),this.bezierT=this.bezier=0,this.getScroll(function(){t&&t()})},o.prototype.getScroll=function(t){var e,o,n,i;return this.t=e=this.bodyEle.scrollTop,this.l=o=this.bodyEle.scrollLeft,this.w=n=this.bodyEle.scrollWidth,this.h=i=this.bodyEle.scrollHeight,t&&t(),window._s={t:e,l:o,w:n,h:i},window._s},o.prototype.scrollTo=function(t,e){this.bodyEle.scrollTop=t,e&&e()},o.prototype.goTo=function(t,e,o){var n=this;return this.getScroll().t==t?(o&&o(),this.init()):void this.curve(t,function(o){n.scrollTo(o,function(){n.timer=setTimeout(function(){n.goTo(t,e)},e/33)})})},o.prototype.stop=function(t){this.init(function(){t&&t()})},o.prototype.curve=function(t,e){this.bezierT>=.9?this.bezierT>=.95?this.bezierT+=.005:this.bezierT+=.01:this.bezierT+=.05;var o=this.t,n=this.t,i=t,r=this.bezierT,s=(1-r)*(1-r)*o+2*r*(1-r)*n+r*r*i;return this.bezier=s,e&&e(s),s},o.prototype.goUp=function(t,e){var o=this;e=e||this.defaultDelay,this.stop(function(){var n=o.t-t>0?o.t-t:0;o.goTo(n,e)})},o.prototype.goDown=function(t,e){var o=this;e=e||this.defaultDelay,this.stop(function(){var n=o.bodyEle.scrollHeight-o.bodyEle.clientHeight,i=o.t+t<n?o.t+t:n;o.goTo(i,e)})},o.prototype.goToEle=function(t,e){var o=this;e=e||this.defaultDelay,this.stop(function(){var n=t.offsetTop+t.offsetParent.offsetTop;o.goTo(n,e)})},document.onkeydown=r,document.onmousewheel=function(){scroller.stop()},window.scroller=new o,window.onpopstate=function(t){t.state&&($("#nprogress").style.opacity=1,$(".bar")[0].style.width="20%",c(t.state.url))},window.onload=function(){a(),$("#to-top").onclick=function(){scroller.goTo(0,500)},window.duoshuoQuery={short_name:"zeroling"};var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="//static.duoshuo.com/embed.js",t.charset="UTF-8",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t);!function(){var t=document.createElement("script");t.src="//hm.baidu.com/hm.js?c06de1e3596fc40979bf743098c3c7d1";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()},e.addReadMoreBottom=i,e.hijackLinks=a});